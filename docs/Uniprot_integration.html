---

title: UniProt data formatting


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/Uniprot_integration.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/Uniprot_integration.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This notebook contains functions to import a uniport annotation file and to format it as pandas dataframe for further usage in alphamap.</p>
<p>The preprocessed uniprot annotation includes information about:</p>
<ul>
<li><strong>the known preprocessing events</strong> for proteins, such as signal peptide, transit peptide, propeptide, chain, peptide;</li>
<li>information on all available in Uniprot <strong>post translational modificatios</strong>, like modified residues (Phosphorylation, Methylation, Acetylation, etc.), Lipidation, Glycosylation, etc.;</li>
<li>information on <strong>sequence similarities</strong> with other proteins and <strong>the domain(s)</strong> present in a protein, such as domain, repeat, region, motif, etc.;</li>
<li>information on <strong>the secondary and tertiary structure</strong> of proteins, such as turn, beta strand, helix.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Instructions-on-how-to-download-a-UniProt-annotation-file">Instructions on how to download a UniProt annotation file<a class="anchor-link" href="#Instructions-on-how-to-download-a-UniProt-annotation-file"> </a></h2><ol>
<li>Go to the Uniprot website(<a href="https://www.uniprot.org/uniprot/">https://www.uniprot.org/uniprot/</a>), select the organism of interest in the "Popular organisms" section and click on it.</li>
<li>Click the "Download" button and select "Text" format.</li>
<li>Select the "Compressed" radio button and click "Go".</li>
<li>Unzip the downloaded file and specify the path to this file.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Helper-functions">Helper functions<a class="anchor-link" href="#Helper-functions"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extract_note" class="doc_header"><code>extract_note</code><a href="https://github.com/mannlabs/alphamap/tree/master/alphamap/uniprot_integration.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extract_note</code>(<strong><code>string</code></strong>:<code>str</code>, <strong><code>splitted</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>
<p>Helper function to extract information about note of the protein from Uniprot using regular expression.</p>
<p>Args:
    string (str): Uniprot annotation string.
    splitted (bool, optional): Flag to allow linebreaks. Default is 'False'.
Returns:
    str: Extracted string of the uniprot note section.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extract_note_end" class="doc_header"><code>extract_note_end</code><a href="https://github.com/mannlabs/alphamap/tree/master/alphamap/uniprot_integration.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extract_note_end</code>(<strong><code>string</code></strong>:<code>str</code>, <strong><code>has_mark</code></strong>:<code>bool</code>=<em><code>True</code></em>)</p>
</blockquote>
<p>Helper function to extract information about note of the protein from Uniprot using regular expression.</p>
<p>Args:
    string (str): Uniprot annotation string.
    has_mark (bool, optional): Flag if end quotation marks are present. Default is 'False'.
Returns:
    str: Extracted string of the uniprot note section.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="resolve_unclear_position" class="doc_header"><code>resolve_unclear_position</code><a href="https://github.com/mannlabs/alphamap/tree/master/alphamap/uniprot_integration.py#L48" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>resolve_unclear_position</code>(<strong><code>value</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Replace unclear position of the start/end of the modification defined as '?' with -1 and if it's defined as '?N'
or "&gt;N" - by removing the '?'/'&gt;'/'&lt;' signs.</p>
<p>Args:
    value (str): Unclear sequence position from uniprot.
Returns:
    float: Resolved sequence position.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extract_positions" class="doc_header"><code>extract_positions</code><a href="https://github.com/mannlabs/alphamap/tree/master/alphamap/uniprot_integration.py#L66" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extract_positions</code>(<strong><code>posit_string</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Extract isoform_id(str) and start/end positions(float) of any feature key from the string.</p>
<p>Args:
    posit_string (str): Uniprot position string.
Returns:
    [str, float, float]: str: Uniprot isoform accession, float: start position, float: end position</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Uniprot-preprocessing-function">Uniprot preprocessing function<a class="anchor-link" href="#Uniprot-preprocessing-function"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="preprocess_uniprot" class="doc_header"><code>preprocess_uniprot</code><a href="https://github.com/mannlabs/alphamap/tree/master/alphamap/uniprot_integration.py#L95" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>preprocess_uniprot</code>(<strong><code>path_to_file</code></strong>:<code>str</code>)</p>
</blockquote>
<p>A complex complete function to preprocess Uniprot data from specifying the path to a flat text file
to the returning a dataframe containing information about:</p>

<pre><code>- protein_id(str)
- feature(category)
- isoform_id(str)
- start(float)
- end(float)
- note information(str)

</code></pre>
<p>Args:
    path_to_file (str): Path to a .txt annotation file directly downloaded from uniprot.
Returns:
    pd.DataFrame: Dataframe with formatted uniprot annotations for alphamap.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="UniProt-feature-dictionary">UniProt feature dictionary<a class="anchor-link" href="#UniProt-feature-dictionary"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following is a dictionary that maps feature names to the feature entries in the processed uniprot annotation file.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

